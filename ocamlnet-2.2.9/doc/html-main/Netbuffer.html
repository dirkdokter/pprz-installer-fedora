<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Netaddress.html">
<link rel="next" href="Netdate.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class attributes" rel=Appendix href="index_attributes.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Uq_gtk" rel="Chapter" href="Uq_gtk.html">
<link title="Equeue" rel="Chapter" href="Equeue.html">
<link title="Unixqueue" rel="Chapter" href="Unixqueue.html">
<link title="Uq_engines" rel="Chapter" href="Uq_engines.html">
<link title="Uq_socks5" rel="Chapter" href="Uq_socks5.html">
<link title="Unixqueue_mt" rel="Chapter" href="Unixqueue_mt.html">
<link title="Equeue_intro" rel="Chapter" href="Equeue_intro.html">
<link title="Uq_ssl" rel="Chapter" href="Uq_ssl.html">
<link title="Uq_tcl" rel="Chapter" href="Uq_tcl.html">
<link title="Netcgi_common" rel="Chapter" href="Netcgi_common.html">
<link title="Netcgi" rel="Chapter" href="Netcgi.html">
<link title="Netcgi_ajp" rel="Chapter" href="Netcgi_ajp.html">
<link title="Netcgi_scgi" rel="Chapter" href="Netcgi_scgi.html">
<link title="Netcgi_cgi" rel="Chapter" href="Netcgi_cgi.html">
<link title="Netcgi_fcgi" rel="Chapter" href="Netcgi_fcgi.html">
<link title="Netcgi_dbi" rel="Chapter" href="Netcgi_dbi.html">
<link title="Netcgi1_compat" rel="Chapter" href="Netcgi1_compat.html">
<link title="Netcgi_test" rel="Chapter" href="Netcgi_test.html">
<link title="Netcgi_porting" rel="Chapter" href="Netcgi_porting.html">
<link title="Netcgi_plex" rel="Chapter" href="Netcgi_plex.html">
<link title="Http_client" rel="Chapter" href="Http_client.html">
<link title="Telnet_client" rel="Chapter" href="Telnet_client.html">
<link title="Ftp_data_endpoint" rel="Chapter" href="Ftp_data_endpoint.html">
<link title="Ftp_client" rel="Chapter" href="Ftp_client.html">
<link title="Nethttpd_types" rel="Chapter" href="Nethttpd_types.html">
<link title="Nethttpd_kernel" rel="Chapter" href="Nethttpd_kernel.html">
<link title="Nethttpd_reactor" rel="Chapter" href="Nethttpd_reactor.html">
<link title="Nethttpd_engine" rel="Chapter" href="Nethttpd_engine.html">
<link title="Nethttpd_services" rel="Chapter" href="Nethttpd_services.html">
<link title="Nethttpd_plex" rel="Chapter" href="Nethttpd_plex.html">
<link title="Nethttpd_intro" rel="Chapter" href="Nethttpd_intro.html">
<link title="Netplex_types" rel="Chapter" href="Netplex_types.html">
<link title="Netplex_mp" rel="Chapter" href="Netplex_mp.html">
<link title="Netplex_mt" rel="Chapter" href="Netplex_mt.html">
<link title="Netplex_log" rel="Chapter" href="Netplex_log.html">
<link title="Netplex_controller" rel="Chapter" href="Netplex_controller.html">
<link title="Netplex_container" rel="Chapter" href="Netplex_container.html">
<link title="Netplex_sockserv" rel="Chapter" href="Netplex_sockserv.html">
<link title="Netplex_workload" rel="Chapter" href="Netplex_workload.html">
<link title="Netplex_main" rel="Chapter" href="Netplex_main.html">
<link title="Netplex_config" rel="Chapter" href="Netplex_config.html">
<link title="Netplex_kit" rel="Chapter" href="Netplex_kit.html">
<link title="Rpc_netplex" rel="Chapter" href="Rpc_netplex.html">
<link title="Netplex_cenv" rel="Chapter" href="Netplex_cenv.html">
<link title="Netplex_intro" rel="Chapter" href="Netplex_intro.html">
<link title="Netshm" rel="Chapter" href="Netshm.html">
<link title="Netshm_data" rel="Chapter" href="Netshm_data.html">
<link title="Netshm_hashtbl" rel="Chapter" href="Netshm_hashtbl.html">
<link title="Netshm_array" rel="Chapter" href="Netshm_array.html">
<link title="Netshm_intro" rel="Chapter" href="Netshm_intro.html">
<link title="Netconversion" rel="Chapter" href="Netconversion.html">
<link title="Netchannels" rel="Chapter" href="Netchannels.html">
<link title="Netstream" rel="Chapter" href="Netstream.html">
<link title="Mimestring" rel="Chapter" href="Mimestring.html">
<link title="Netmime" rel="Chapter" href="Netmime.html">
<link title="Netsendmail" rel="Chapter" href="Netsendmail.html">
<link title="Neturl" rel="Chapter" href="Neturl.html">
<link title="Netaddress" rel="Chapter" href="Netaddress.html">
<link title="Netbuffer" rel="Chapter" href="Netbuffer.html">
<link title="Netdate" rel="Chapter" href="Netdate.html">
<link title="Netencoding" rel="Chapter" href="Netencoding.html">
<link title="Netulex" rel="Chapter" href="Netulex.html">
<link title="Netaccel" rel="Chapter" href="Netaccel.html">
<link title="Netaccel_link" rel="Chapter" href="Netaccel_link.html">
<link title="Nethtml" rel="Chapter" href="Nethtml.html">
<link title="Netstring_str" rel="Chapter" href="Netstring_str.html">
<link title="Netstring_pcre" rel="Chapter" href="Netstring_pcre.html">
<link title="Netstring_mt" rel="Chapter" href="Netstring_mt.html">
<link title="Netmappings" rel="Chapter" href="Netmappings.html">
<link title="Netaux" rel="Chapter" href="Netaux.html">
<link title="Nethttp" rel="Chapter" href="Nethttp.html">
<link title="Netchannels_tut" rel="Chapter" href="Netchannels_tut.html">
<link title="Netmime_tut" rel="Chapter" href="Netmime_tut.html">
<link title="Netsendmail_tut" rel="Chapter" href="Netsendmail_tut.html">
<link title="Netulex_tut" rel="Chapter" href="Netulex_tut.html">
<link title="Neturl_tut" rel="Chapter" href="Neturl_tut.html">
<link title="Netsys" rel="Chapter" href="Netsys.html">
<link title="Netpop" rel="Chapter" href="Netpop.html">
<link title="Rpc_auth_dh" rel="Chapter" href="Rpc_auth_dh.html">
<link title="Rpc_key_service" rel="Chapter" href="Rpc_key_service.html">
<link title="Rpc_time" rel="Chapter" href="Rpc_time.html">
<link title="Rpc_auth_local" rel="Chapter" href="Rpc_auth_local.html">
<link title="Rtypes" rel="Chapter" href="Rtypes.html">
<link title="Xdr" rel="Chapter" href="Xdr.html">
<link title="Rpc" rel="Chapter" href="Rpc.html">
<link title="Rpc_program" rel="Chapter" href="Rpc_program.html">
<link title="Rpc_portmapper_aux" rel="Chapter" href="Rpc_portmapper_aux.html">
<link title="Rpc_packer" rel="Chapter" href="Rpc_packer.html">
<link title="Rpc_transport" rel="Chapter" href="Rpc_transport.html">
<link title="Rpc_client" rel="Chapter" href="Rpc_client.html">
<link title="Rpc_simple_client" rel="Chapter" href="Rpc_simple_client.html">
<link title="Rpc_portmapper_clnt" rel="Chapter" href="Rpc_portmapper_clnt.html">
<link title="Rpc_portmapper" rel="Chapter" href="Rpc_portmapper.html">
<link title="Rpc_server" rel="Chapter" href="Rpc_server.html">
<link title="Rpc_auth_sys" rel="Chapter" href="Rpc_auth_sys.html">
<link title="Rpc_intro" rel="Chapter" href="Rpc_intro.html">
<link title="Rpc_mapping_ref" rel="Chapter" href="Rpc_mapping_ref.html">
<link title="Rpc_ssl" rel="Chapter" href="Rpc_ssl.html">
<link title="Rpc_xti_client" rel="Chapter" href="Rpc_xti_client.html">
<link title="Shell_sys" rel="Chapter" href="Shell_sys.html">
<link title="Shell" rel="Chapter" href="Shell.html">
<link title="Shell_uq" rel="Chapter" href="Shell_uq.html">
<link title="Shell_mt" rel="Chapter" href="Shell_mt.html">
<link title="Shell_intro" rel="Chapter" href="Shell_intro.html">
<link title="Netsmtp" rel="Chapter" href="Netsmtp.html"><link title="Extracting strings" rel="Section" href="#2_Extractingstrings">
<link title="Appending strings" rel="Section" href="#2_Appendingstrings">
<link title="Inserting strings" rel="Section" href="#2_Insertingstrings">
<link title="Overwriting strings" rel="Section" href="#2_Overwritingstrings">
<link title="Deleting" rel="Section" href="#2_Deleting">
<link title="Searching" rel="Section" href="#2_Searching">
<link title="Miscelleneous" rel="Section" href="#2_Miscelleneous">
<title>Ocamlnet 2 Reference Manual : Netbuffer</title>
</head>
<body>
<div class="navbar"><a href="Netaddress.html">Previous</a>
&nbsp;<a href="index.html">Up</a>
&nbsp;<a href="Netdate.html">Next</a>
</div>
<center><h1>Module <a href="type_Netbuffer.html">Netbuffer</a></h1></center>
<br>
<pre><span class="keyword">module</span> Netbuffer: <code class="code">sig</code> <a href="Netbuffer.html">..</a> <code class="code">end</code></pre>A Netbuffer.t is a buffer that can grow and shrink dynamically.<br>
<hr width="100%">
<pre><span class="keyword">type</span> <a name="TYPEt"></a><code class="type"></code>t </pre>

<pre><span class="keyword">val</span> <a name="VALcreate"></a>create : <code class="type">int -> <a href="Netbuffer.html#TYPEt">t</a></code></pre><div class="info">
Creates a netbuffer which allocates initially this number of bytes. 
 The logical length is zero.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALcontents"></a>contents : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> string</code></pre><div class="info">
Returns the contents of the buffer as fresh string.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALlength"></a>length : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int</code></pre><div class="info">
Returns the logical length of the buffer<br>
</div>
<br>
<a name="2_Extractingstrings"></a>
<h2>Extracting strings</h2><br>
<pre><span class="keyword">val</span> <a name="VALget"></a>get : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> char</code></pre><div class="info">
<code class="code">get nb pos</code>: Get the character at <code class="code">pos</code><br>
</div>
<pre><span class="keyword">val</span> <a name="VALnth"></a>nth : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> char</code></pre><div class="info">
Alias for <code class="code">get</code><br>
</div>
<pre><span class="keyword">val</span> <a name="VALsub"></a>sub : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> int -> string</code></pre><div class="info">
<code class="code">sub nb k n</code>: returns the n characters starting at position <code class="code">n</code> from 
 netbuffer <code class="code">nb</code> as fresh string<br>
</div>
<pre><span class="keyword">val</span> <a name="VALblit_to_string"></a>blit_to_string : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> string -> int -> int -> unit</code></pre><div class="info">
<code class="code">blit_to_string nb srcpos dest destpos len</code>: Copies the <code class="code">len</code> bytes at
 position <code class="code">srcpos</code> from <code class="code">nb</code> to the string <code class="code">dest</code> at position <code class="code">destpos</code>.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALblit"></a>blit : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> string -> int -> int -> unit</code></pre><div class="info">
Compatibility name for <code class="code">blit_to_string</code>, now deprecated<br>
</div>
<br>
<a name="2_Appendingstrings"></a>
<h2>Appending strings</h2><br>
<pre><span class="keyword">val</span> <a name="VALadd_string"></a>add_string : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> string -> unit</code></pre><div class="info">
<code class="code">add_string nb s</code>: Adds a copy of the string <code class="code">s</code> to the logical end of
 the netbuffer <code class="code">nb</code>. If necessary, <code class="code">nb</code> grows.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALadd_sub_string"></a>add_sub_string : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> string -> int -> int -> unit</code></pre><div class="info">
<code class="code">add_sub_string nb s k n</code>: Adds the substring of <code class="code">s</code> starting at position
 <code class="code">k</code> with length <code class="code">n</code> to the logical end of the netbuffer <code class="code">nb</code>. If necessary,
 <code class="code">nb</code> grows.
<p>

 This is semantically the same as
 <code class="code">add_string nb (String.sub s k n)</code>, but the extra copy is avoided.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALadd_substring"></a>add_substring : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> string -> int -> int -> unit</code></pre><div class="info">
Alias for add_sub_string<br>
</div>
<pre><span class="keyword">val</span> <a name="VALadd_char"></a>add_char : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> char -> unit</code></pre><div class="info">
<code class="code">add_char nb c</code>: Adds a single char at the end of the buffer<br>
</div>
<pre><span class="keyword">val</span> <a name="VALadd_inplace"></a>add_inplace : <code class="type">?len:int -> <a href="Netbuffer.html#TYPEt">t</a> -> (string -> int -> int -> int) -> int</code></pre><div class="info">
<code class="code">add_inplace nb f</code>: Calls the function <code class="code">f</code> to add bytes to the
 netbuffer <code class="code">nb</code>. The arguments of <code class="code">f</code> are the buffer, the position
 in the buffer, and the maximum length. The function <code class="code">f</code> must return
 the actual number of added bytes; this number is also returned by
 <code class="code">add_inplace</code>.
<p>

 Example: let n = add_inplace nb (Pervasives.input ch)
<p>

 The argument <code class="code">len</code> is the number of bytes to add (second argument of
 <code class="code">f</code>). It defaults to the number of free bytes in the buffer after space
 for at least one byte has been allocated.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALadd_buffer"></a>add_buffer : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> <a href="Netbuffer.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">add_buffer nb1 nb2</code>: Adds the contents of <code class="code">nb2</code> to the end of <code class="code">nb1</code><br>
</div>
<br>
<a name="2_Insertingstrings"></a>
<h2>Inserting strings</h2><br>
<pre><span class="keyword">val</span> <a name="VALinsert_string"></a>insert_string : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> string -> unit</code></pre><div class="info">
<code class="code">insert_string nb p s</code>: Inserts the value of string <code class="code">s</code> at position
 <code class="code">p</code> into the netbuffer <code class="code">nb</code><br>
</div>
<pre><span class="keyword">val</span> <a name="VALinsert_sub_string"></a>insert_sub_string : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> string -> int -> int -> unit</code></pre><div class="info">
<code class="code">insert_string nb p s k n</code>: Inserts a substring of string <code class="code">s</code> at position
 <code class="code">p</code> into the netbuffer <code class="code">nb</code>. The substring is denoted by position <code class="code">k</code>
 and has length <code class="code">n</code><br>
</div>
<pre><span class="keyword">val</span> <a name="VALinsert_char"></a>insert_char : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> char -> unit</code></pre><div class="info">
<code class="code">insert_char nb p c</code>: Inserts character <code class="code">c</code> at position <code class="code">p</code> into
 the netbuffer <code class="code">nb</code><br>
</div>
<br>
<a name="2_Overwritingstrings"></a>
<h2>Overwriting strings</h2><br>
<pre><span class="keyword">val</span> <a name="VALset"></a>set : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> char -> unit</code></pre><div class="info">
<code class="code">set nb pos c</code>: Sets the character at <code class="code">pos</code> to <code class="code">c</code><br>
</div>
<pre><span class="keyword">val</span> <a name="VALput_string"></a>put_string : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> string -> unit</code></pre><div class="info">
<code class="code">put_string nb pos s</code>: Copies the string <code class="code">s</code> to the position <code class="code">pos</code>
        of netbuffer <code class="code">nb</code><br>
</div>
<pre><span class="keyword">val</span> <a name="VALblit_from_string"></a>blit_from_string : <code class="type">string -> int -> <a href="Netbuffer.html#TYPEt">t</a> -> int -> int -> unit</code></pre><div class="info">
<code class="code">blit_from_string src srcpos dest destpos len</code>: Copies the <code class="code">len</code> bytes
 at position <code class="code">srcpos</code> from the string <code class="code">src</code> to the netbuffer <code class="code">dest</code> at
 position <code class="code">destpos</code>.
<p>

 It is possible to copy the string beyond the end of the buffer. The
 buffer is automatically enlarged in this case.<br>
</div>
<br>
<a name="2_Deleting"></a>
<h2>Deleting</h2><br>
<pre><span class="keyword">val</span> <a name="VALdelete"></a>delete : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> int -> unit</code></pre><div class="info">
<code class="code">delete nb k n</code>: Deletes the <code class="code">n</code> bytes at position <code class="code">k</code> of netbuffer 
 <code class="code">nb</code> in-place.
<p>

 The netbuffer does not shrink, however, i.e. the free space is not
 given back to the memory manager.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALclear"></a>clear : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> unit</code></pre><div class="info">
Deletes all contents from the buffer. As <code class="code">delete</code>, the netbuffer does
 not shrink.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALreset"></a>reset : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> unit</code></pre><div class="info">
Empty the buffer, deallocate the internal string, and replace it
        with a new string of length <code class="code">n</code> that was allocated by
        <a href="Netbuffer.html#VALcreate"><code class="code">Netbuffer.create</code></a> <code class="code">n</code>.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALtry_shrinking"></a>try_shrinking : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> unit</code></pre><div class="info">
<code class="code">try_shrinking nb</code>: If the length of the buffer is less than half of
 the allocated space, the netbuffer is reallocated in order to save
 memory.<br>
</div>
<br>
<a name="2_Searching"></a>
<h2>Searching</h2><br>
<pre><span class="keyword">val</span> <a name="VALindex_from"></a>index_from : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> int -> char -> int</code></pre><div class="info">
<code class="code">index_from nb k c</code>: Searches the character <code class="code">c</code> in the netbuffer beginning
 at position <code class="code">k</code>. If found, the position of the left-most occurence is
 returned. Otherwise, <code class="code">Not_found</code> is raised.<br>
</div>
<br>
<a name="2_Miscelleneous"></a>
<h2>Miscelleneous</h2><br>
<pre><span class="keyword">val</span> <a name="VALunsafe_buffer"></a>unsafe_buffer : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> string</code></pre><div class="info">
<b>Warning! This is a low-level function!</b>
 Returns the current string that internally holds the buffer.
 The byte positions 0 to length - 1 actually store the contents of
 the buffer. You can directly read and modify the buffer. Note that
 there is no protection if you read or write positions beyond the
 length of the buffer.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALprint_buffer"></a>print_buffer : <code class="type"><a href="Netbuffer.html#TYPEt">t</a> -> unit</code></pre><div class="info">
For the toploop<br>
</div>
</body></html>